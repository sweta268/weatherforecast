<!-- search-bar.component.html -->

<div class="container background-image">
  <h2 class="mt-4">Welcome to the Weather Forecast</h2>

  <div class="input-group mb-4">
    <label for="cityInput" class="input-label">Search weather by City</label>
    <input
      type="text"
      class="form-control"
      [(ngModel)]="cityName"
      placeholder="Search Weather by a city"
    />
    <div class="input-group-append">
      <button class="btn btn-primary" (click)="searchWeather('imperial')">
        Fahrenheit
      </button>
      <button class="btn btn-primary" (click)="searchWeather('metric')">
        Celsius
      </button>
    </div>
  </div>
  <div class="seperator">OR</div>
  <div class="input-group mb-4">
    <label for="cityInput" class="input-label"
      >Search weather by Latitude and Longitude</label
    >
    <input
      type="text"
      class="form-control"
      [(ngModel)]="latitude"
      placeholder="Enter Latitude"
    />
    <input
      type="text"
      class="form-control"
      [(ngModel)]="longitude"
      placeholder="Enter Longitude"
    />
    <div class="input-group-append">
      <button class="btn btn-primary" (click)="searchWeather('imperial')">
        Fahrenheit
      </button>
      <button class="btn btn-primary" (click)="searchWeather('metric')">
        Celsius
      </button>
    </div>
  </div>

  <!-- Current Weather data -->
  <div *ngIf="WeatherData" class="mb-4">
    <h3 class="text-center">
      {{ WeatherData.name }}, {{ WeatherData.sys.country }}
    </h3>
    <h4 class="text-center">
      Displaying current weather in {{ temperatureUnit }}
    </h4>
    <table>
      <tbody class="text-left">
        <tr>
          <td>
            Temperature:
            {{ temp }}
          </td>
          <td rowspan="5">
            <img
              [src]="overallWeathericon"
              alt="Weather Icon"
              class="img-fluid"
            />
          </td>
        </tr>
        <tr>
          Feels Like:
          {{
            feelsLike
          }}
        </tr>
        <tr>
          Humidity:
          {{
            humidity
          }}
        </tr>
        <tr>
          Wind Speed:
          {{
            wind_speed
          }}
        </tr>
        <tr>
          Description:
          {{
            description
          }}
        </tr>
      </tbody>
    </table>
  </div>
  <!-- Current Weather data -->

  <!-- 5 day Weather data -->
  <table>
    <thead class="text-left">
      <tr>
        <td *ngFor="let forecast of dailyWeatherData | keyvalue">
          <div class="column">
            <p class="date">
              {{ forecast.key | date : "shortDate" }},
              {{ forecast.key | date : "EEE" }}
            </p>
            <div *ngFor="let forecastDetail of forecast.value">
              <div class="forecast-item">
                <img
                  [src]="forecastDetail.dailyWeatherIcon"
                  alt="Weather Icon"
                  class="img-fluid"
                />
                <p class="weather-description">
                  {{ forecastDetail.weatherDescription }}
                </p>
                <p class="temperature">
                  {{ forecastDetail.maxTemperature }} /
                  {{ forecastDetail.minTemperature }}
                </p>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </thead>
  </table>
  <!-- 5 day Weather data -->
</div>
